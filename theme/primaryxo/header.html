<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html <?php echo $direction ?>>
<head>
<?php echo $meta ?>
<title><?php echo $title ?></title>


<?php include("$CFG->javascript"); ?>

<script type="text/javascript">
	//<![CDATA[
		function primaryxo_setallvis(vis)
		{
			primaryxo_setvis(document.getElementById('navbar'), vis);
			primaryxo_setvis(document.getElementById('footer'), vis);
			primaryxo_setvis(document.getElementById('modstandardelshdr'), vis);

			//this is FF3 only, MUST IEize this code!!!
			//xbw versions of getElementsByClassName exist both in:
			//tinyMCE Sugar Theme AND Moodle's weblib.php
			helplinks = document.getElementsByClassName('helplink');
			for (i=0; i < helplinks.length; i++)
			{
				primaryxo_setvis(helplinks[i], vis);
			}

			helplinks = document.getElementsByClassName('iconhelp');
			for (i=0; i < helplinks.length; i++)
			{
				primaryxo_setvis(helplinks[i], vis);
			}

			helplinks = document.getElementsByClassName('headermenu');
			for (i=0; i < helplinks.length; i++)
			{
				primaryxo_setvis(helplinks[i], vis);
			}

			primaryxo_setvis(document.getElementById('xobtns'), !vis);
			primaryxo_setvis(document.getElementById('xobtnh'), vis);
		}

		function primaryxo_setvis(e, v)
		{
			if (!e)
				return;

			if (v)
			{
				e.style.visibility = 'visible';
				e.style.overflow = e.origoverflow;
				e.style.height = e.origheight;
				e.style.width = e.origwidth;
			}
			else
			{
				e.origheight = e.style.height;
				e.origwidth = e.style.width;
				e.origoverflow = e.style.overflow;

				e.style.visibility = 'hidden';
				e.style.overflow = 'auto';
				e.style.height = '0px';
				e.style.width = '0px';
			}
		}
	//]]>
</script>
</head>

<body <?php echo $bodytags; ?> onload="primaryxo_setallvis(false);">

<div id="page"><?php //Accessibility: 'headermain' is now H1, see theme/standard/styles_layout.css: .headermain
	if ($home) {  // This is what gets printed on the home page only
?>
<div id="header-home" class="clearfix">
<h1 class="headermain"><?php echo $heading ?></h1>
<div class="headermenu"><?php echo $menu ?></div>
</div>
<?php } else if ($heading) {  // This is what gets printed on any other page with a heading
?>
<div id="header" class="clearfix">
<h1 class="headermain"><?php echo $heading ?></h1>
<div class="headermenu"><?php echo $menu ?></div>
</div>
<?php } ?> <?php //Accessibility: breadcrumb trail/navbar now a DIV, not a table.
	if ($navigation) { // This is the navigation bar with breadcrumbs  ?>
<div id="navbar" class="navbar clearfix">
<div class="breadcrumb"><?php print_navigation($navigation); ?></div>
<div class="navbutton"><?php echo $button; ?></div>
</div>
<?php } else if ($heading) { // If no navigation, but a heading, then print a line
?>
<hr size="1" noshade="noshade" />
<?php } ?> <!-- END OF HEADER -->
<div id="content"></div>
</div>
</body>
</html>
